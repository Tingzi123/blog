---
title: GO：1.4 程序实体
date: 2020-07-13 10:42:07
tags:
---
Go 语言中的**程序实体包括变量、常量、函数、结构体和接口**。 Go 语言是**静态类型**的编程语言，所以我们在声明变量或常量的时候，都需要指定它们的类型，或者给予足够的信息，这样才可以让 Go 语言能够推导出它们的类型。

### 1、变量
在 Go 语言中，**变量的类型可以是其预定义的那些类型，也可以是程序自定义的函数、结构体或接口**。常量的合法类型不多，只能是那些 Go 语言预定义的基本类型。它的声明方式也更简单一些。

#### 1、声明变量有几种方式？
1、先声明后赋值
一个很简单的命令源码文件，命名为 demo7.go。
```go
package main

import (
  "flag"
  "fmt"
)

func main() {
  var name string // 先声明
  flag.StringVar(&name, "name", "everyone", "The greeting object.") // 后赋值
  flag.Parse()
  fmt.Printf("Hello, %v!\n", name)
}
```
2、使用var声明变量的同时赋值
```go
package main

import (
  "flag"
  "fmt"
)

func main() {
  var name = flag.String("name", "everyone", "The greeting object.")//声明的同时赋值
  flag.Parse()
  fmt.Printf("Hello, %v!\n", *name)。
}
```
flag.String函数返回的结果值的类型是*string而不是string。类型*string代表的是字符串的指针类型，而不是字符串类型。因此，这里的变量name代表的是一个指向字符串值的指针。

注：

 - 1、声明变量name的同时，还为它赋了值，而这时声明中并没有显式指定name的类型。之前的变量声明语句是var name string。这里利用了 Go 语言自身的类型推断，而省去了对该变量的类型的声明。
 - 2、类型推断是一种编程语言在编译期自动解释表达式类型的能力。
 - 3、类型推断只能用于对变量或常量的初始化。

3、使用":="短变量声明的同时赋值
```go
package main

import (
  "flag"
  "fmt"
)

func main() {
  name := flag.String("name", "everyone", "The greeting object.")//声明的同时赋值
  flag.Parse()
  fmt.Printf("Hello, %v!\n", *name)。
}
```
注：

 - 1、短变量声明，实际上就是 Go 语言的类型推断再加上一点点语法糖，**只能在函数体内部使用短变量声明**
 - 在编写if、for或switch语句的时候，我们经常把它安插在初始化子句中，并用来声明一些临时的变量。而相比之下，第一种方式更加通用，它可以被用在任何地方。
![app1](./app1.png)
 

#### 2、Go 语言的类型推断可以带来哪些好处？
在写代码时，我们通过使用 Go 语言的类型推断，而节省下来的键盘敲击次数几乎可以忽略不计。但它真正的好处，往往会体现在我们写代码之后的那些事情上，比如**代码重构**。

通过调用一个函数在声明name变量的同时为它赋值，这个函数是由我们自己定义的函数getTheFlag。
